if(figma.editorType==="figma")figma.showUI(__html__,{themeColors:!0,width:252,height:1124,title:"Viewport Screenshot"}),figma.ui.onmessage=(a)=>{if(a.type==="data-viewport"){const l=encodeURIComponent(a.options.url),r=JSON.stringify(a.options.viewport);fetch(`http://localhost:3000?viewport=${r}&url=${l}`).then(async(e)=>{return console.log("response",e),e.arrayBuffer()}).then(async(e)=>{console.log("buffer",e);const t=new Uint8Array(e.slice(0,8)),n=new Uint8Array(e.slice(8,33)),i=new Uint8Array(e.slice(33,e.byteLength-12)),s=new Uint8Array(e.slice(e.byteLength-12)),o=new Uint8Array(t.length+n.length+i.length+s.length);return o.set(t,0),o.set(n,t.length),o.set(i,t.length+n.length),o.set(s,t.length+n.length+i.length),figma.createImage(o)}).then(async(e)=>{const{width:t,height:n}=await e.getSizeAsync(),i=figma.createFrame();i.resize(t,n),i.fills=[{type:"IMAGE",imageHash:e.hash,scaleMode:"FILL"}]}).catch((e)=>{console.log("error",e),figma.notify("Failed to load image. Please check the URL.")})}};
